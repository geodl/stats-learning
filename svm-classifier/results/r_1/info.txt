using simplified version of SMO